 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Instagram | Like feature</title>
  <style>
    :root{
      --heart-size: 100px;
      --icon-size: 36px;
      --accent: #e0245e;
      --muted: #666;
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: #f3f4f6;
    }

    .card {
      width: 450px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .image-wrap {
      position: relative;
      background: #111;
      height: 360px;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select: none;
      cursor: pointer;
    }

    .image-wrap img {
      display:block;
      max-width:100%;
      max-height:100%;
      width:100%;
      height:100%;
      object-fit:cover;
    }

    /* Heart that temporarily appears on double-click */
    .floating-heart {
      position: absolute;
      width: var(--heart-size);
      height: var(--heart-size);
      transform: translate(-50%, -50%) scale(0);
      pointer-events: none;
      display: grid;
      place-items: center;
      z-index: 30;
      opacity: 0;
      will-change: transform, opacity;
      filter: drop-shadow(0 6px 18px rgba(228, 8, 8, 0.89));
      transition: opacity 120ms linear;
    }

    .floating-heart.show {
      animation: heart-pop 700ms cubic-bezier(.2,.9,.3,1);
      opacity: 1;
    }

    @keyframes heart-pop {
      0%   { transform: translate(-50%, -50%) scale(0.25); opacity: 0; }
      30%  { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      60%  { transform: translate(-50%, -50%) scale(0.95); }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0.95; }
    }

    .heart-svg {
      width: 100%;
      height: 100%;
      fill: var(--accent);
      transform: translateY(-6px);
    }

    /* Controls */
    .controls {
      display:flex;
      align-items:center;
      gap:10px;
      padding: 12px 16px;
    }

    .like-btn {
      display:inline-flex;
      align-items:center;
      gap:8px;
      border: none;
      background: none;
      cursor: pointer;
      padding: 6px 8px;
      font-size: 15px;
      color: var(--muted);
    }

    .like-btn.liked {
      color: var(--accent);
      font-weight: 600;
    }

    .count {
      margin-left:auto;
      color:var(--muted);
      font-weight:600;
    }

    /* small heart icon on like button */
    .like-icon {
      width: var(--icon-size);
      height: var(--icon-size);
      display:inline-block;
      vertical-align: middle;
    }
  </style>
</head>
<body>

  <div class="card" aria-live="polite">
    <div class="image-wrap" id="imageWrap" tabindex="0" aria-label="Double-click the image to like">
      <!-- Replace src with any image URL you like -->
      <img id="targetImage" src= "https://images.unsplash.com/photo-1580273916550-e323be2ae537?q=80&w=764&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Sample post image" />
      <!-- floating heart is created dynamically -->
    </div>

    <div class="controls">
      <button id="likeBtn" class="like-btn" aria-pressed="false" title="Like (toggle)">
        <svg class="like-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path id="likeIconPath" d="M12.1 21.35l-1.1-1.01C5.14 15.24 2 12.39 2 8.99 2 6.53 3.99 4.5 6.45 4.5c1.54 0 3.04.99 3.57 2.36h.98C13.51 5.49 15.01 4.5 16.55 4.5 19.01 4.5 21 6.53 21 8.99c0 3.4-3.14 6.25-8.9 11.35l-0.0 0z" fill="#666"></path>
        </svg>
        <span id="likeLabel">Like</span>
      </button>

      <div class="count" id="likeCount">0 likes</div>
    </div>
  </div>

<script>
  (function(){
    const imageWrap = document.getElementById('imageWrap');
    const likeBtn = document.getElementById('likeBtn');
    const likeLabel = document.getElementById('likeLabel');
    const likeCountEl = document.getElementById('likeCount');
    const likeIconPath = document.getElementById('likeIconPath');

    let likes = 0;
    let liked = false;

    // Update UI helper
    function updateLikeUI() {
      likeCountEl.textContent = `${likes} ${likes === 1 ? 'like' : 'likes'}`;
      likeBtn.classList.toggle('liked', liked);
      likeBtn.setAttribute('aria-pressed', String(liked));
      likeLabel.textContent = liked ? 'Liked' : 'Like';
      // change small button icon color by swapping the path fill (simple)
      likeIconPath.setAttribute('fill', liked ? '#e0245e' : '#666');
    }

    // Toggle like using the like button
    likeBtn.addEventListener('click', () => {
      liked = !liked;
      likes += liked ? 1 : -1;
      if (likes < 0) likes = 0;
      updateLikeUI();
    });

    // Create and show a floating heart at (x,y) relative to imageWrap
    function showFloatingHeart(x, y) {
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      // position where user double-clicked (relative to imageWrap)
      heart.style.left = x + 'px';
      heart.style.top  = y + 'px';

      // Hearts use inline SVG for sharpness
      heart.innerHTML = `
        <svg class="heart-svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.54 0 3.04.99 3.57 2.36L12 9.9l1.93-3.54C15.46 4.99 16.96 4 18.5 4 21 4 23 6 23 8.5c0 3.78-3.4 6.86-8.55 11.53L12 21.35z"></path>
        </svg>
      `;

      // append and trigger animation class in next microtask
      imageWrap.appendChild(heart);

      // force reflow then add class to ensure animation fires
      requestAnimationFrame(() => {
        heart.classList.add('show');
      });

      // Remove the floating heart after animation finishes (safe cleanup)
      // Using setTimeout as requested. Match to animation length (700ms).
      const removeAfter = 800;
      setTimeout(() => {
        // Fade then remove to keep DOM clean
        heart.classList.remove('show');
        // Remove node after small delay so fade completes
        setTimeout(() => heart.remove(), 120);
      }, removeAfter);
    }

    // dblclick handler: show heart at click coordinate and like the post.
    imageWrap.addEventListener('dblclick', (ev) => {
      // Determine click location relative to the imageWrap
      const rect = imageWrap.getBoundingClientRect();
      const offsetX = ev.clientX - rect.left;
      const offsetY = ev.clientY - rect.top;

      // Show floating heart at clicked position
      showFloatingHeart(offsetX, offsetY);

      // If not already liked, like the post (Instagram behaviour)
      if (!liked) {
        liked = true;
        likes += 1;
        updateLikeUI();

        // Optional: small "liked" state timeout visual (not necessary, but could be used)
        // Example: briefly change the like button label back or show toast. Skipped for clarity.
      } else {
        // already liked -> do nothing (Instagram doesn't unlike on double-tap)
      }
    });

    // keyboard accessibility: pressing Enter or Space on the image will 'dblclick-like'
    imageWrap.addEventListener('keydown', (ev) => {
      if (ev.key === 'Enter' || ev.key === ' ') {
        ev.preventDefault();
        // center heart
        const rect = imageWrap.getBoundingClientRect();
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        showFloatingHeart(centerX, centerY);

        if (!liked) {
          liked = true;
          likes += 1;
          updateLikeUI();
        }
      }
    });

    // init UI
    updateLikeUI();

  })();
</script>

</body>
</html> 


 
